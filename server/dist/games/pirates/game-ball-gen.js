"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Creates a ball around islands.
 *
 * @param mapWidth - The width of the map.
 * @param mapHeight  - The height of the map.
 * @param rng - The RNG function
 * @returns A generated ball for the island.
 */
function islandBalls(mapWidth, mapHeight, rng) {
    const balls = [];
    const minRadius = 0.5;
    const maxRadius = 1.5;
    const maxOffset = mapWidth * 0.2;
    const additionalBalls = 20;
    const radiusRange = maxRadius - minRadius;
    // Generate balls
    const islandX = mapWidth * 0.25 + 0.5;
    for (let i = 0; i < additionalBalls; i++) {
        balls.push({
            x: islandX + rng() * maxOffset * 2 - maxOffset,
            y: rng() * (mapHeight - 1) + 0.5,
            r: rng() * radiusRange + minRadius,
        });
    }
    return {
        balls,
        gooeyness: 1.0,
        threshold: 3.5,
        grassThreshold: 4.25,
        seaThreshold: 2.0,
    };
}
exports.islandBalls = islandBalls;
/**
 * Creates a ball around rivers.
 *
 * @param mapWidth - The width of the map.
 * @param mapHeight  - The height of the map.
 * @param rng - The RNG function
 * @returns A generated ball for the river.
 */
function riverBalls(mapWidth, mapHeight, rng) {
    const balls = [];
    const minRadius = 0.5;
    const maxRadius = 4.0;
    const maxOffset = mapHeight / 2;
    const additionalBalls = 8;
    const radiusRange = maxRadius - minRadius;
    // Initial ball
    const islandX = 0.5;
    const islandY = (rng() < 0.5) ? 0.5 : (mapHeight - 0.5);
    balls.push({
        x: islandX,
        y: islandY,
        r: rng() * radiusRange + minRadius,
    });
    // Extra balls
    for (let i = 0; i < additionalBalls; i++) {
        balls.push({
            x: islandX,
            y: islandY + rng() * maxOffset * 2 - maxOffset,
            r: rng() * radiusRange + minRadius,
        });
    }
    return {
        balls,
        gooeyness: 0.95,
        threshold: 2.0,
        grassThreshold: 2.4,
        seaThreshold: 1.5,
    };
}
exports.riverBalls = riverBalls;
/**
 * Creates a ball around corners of the map.
 *
 * @param mapWidth - The width of the map.
 * @param mapHeight  - The height of the map.
 * @param rng - The RNG function
 * @returns A generated ball for the corner.
 */
function cornerBalls(mapWidth, mapHeight, rng) {
    const balls = [];
    const minRadius = 0.75;
    const maxRadius = 1.25;
    const maxOffset = 10.0;
    const additionalBalls = 20;
    const radiusRange = maxRadius - minRadius;
    // Initial ball (top island)
    const islandX = 0.5;
    let islandY = 0.5;
    balls.push({
        x: islandX,
        y: islandY,
        r: rng() * radiusRange + minRadius,
    });
    // Extra balls (top island)
    for (let i = 0; i < additionalBalls; i++) {
        balls.push({
            x: islandX + rng() * maxOffset * 2 - maxOffset,
            y: islandY + rng() * maxOffset * 2 - maxOffset,
            r: rng() * radiusRange + minRadius,
        });
    }
    // Initial ball (bottom island)
    islandY = mapHeight - 0.5;
    balls.push({
        x: islandX,
        y: islandY,
        r: rng() * radiusRange + minRadius,
    });
    // Extra balls (bottom island)
    for (let i = 0; i < additionalBalls; i++) {
        balls.push({
            x: islandX + rng() * maxOffset * 2 - maxOffset,
            y: islandY - rng() * maxOffset,
            r: rng() * radiusRange + minRadius,
        });
    }
    return {
        balls,
        gooeyness: 1.0,
        threshold: 4.0,
        grassThreshold: 5.0,
        seaThreshold: 2.75,
    };
}
exports.cornerBalls = cornerBalls;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS1iYWxsLWdlbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9nYW1lcy9waXJhdGVzL2dhbWUtYmFsbC1nZW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUF3QkE7Ozs7Ozs7R0FPRztBQUNILFNBQWdCLFdBQVcsQ0FBQyxRQUFnQixFQUFFLFNBQWlCLEVBQUUsR0FBaUI7SUFDOUUsTUFBTSxLQUFLLEdBQVksRUFBRSxDQUFDO0lBQzFCLE1BQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQztJQUN0QixNQUFNLFNBQVMsR0FBRyxHQUFHLENBQUM7SUFDdEIsTUFBTSxTQUFTLEdBQUcsUUFBUSxHQUFHLEdBQUcsQ0FBQztJQUNqQyxNQUFNLGVBQWUsR0FBRyxFQUFFLENBQUM7SUFDM0IsTUFBTSxXQUFXLEdBQUcsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUUxQyxpQkFBaUI7SUFDakIsTUFBTSxPQUFPLEdBQUcsUUFBUSxHQUFHLElBQUksR0FBRyxHQUFHLENBQUM7SUFDdEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGVBQWUsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN0QyxLQUFLLENBQUMsSUFBSSxDQUFDO1lBQ1AsQ0FBQyxFQUFFLE9BQU8sR0FBRyxHQUFHLEVBQUUsR0FBRyxTQUFTLEdBQUcsQ0FBQyxHQUFHLFNBQVM7WUFDOUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUc7WUFDaEMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLFdBQVcsR0FBRyxTQUFTO1NBQ3JDLENBQUMsQ0FBQztLQUNOO0lBRUQsT0FBTztRQUNILEtBQUs7UUFDTCxTQUFTLEVBQUUsR0FBRztRQUNkLFNBQVMsRUFBRSxHQUFHO1FBQ2QsY0FBYyxFQUFFLElBQUk7UUFDcEIsWUFBWSxFQUFFLEdBQUc7S0FDcEIsQ0FBQztBQUNOLENBQUM7QUF6QkQsa0NB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LENBQUMsRUFBRSxPQUFPO1FBQ1YsQ0FBQyxFQUFFLE9BQU87UUFDVixDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsV0FBVyxHQUFHLFNBQVM7S0FDckMsQ0FBQyxDQUFDO0lBRUgsOEJBQThCO0lBQzlCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxlQUFlLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDdEMsS0FBSyxDQUFDLElBQUksQ0FBQztZQUNQLENBQUMsRUFBRSxPQUFPLEdBQUcsR0FBRyxFQUFFLEdBQUcsU0FBUyxHQUFHLENBQUMsR0FBRyxTQUFTO1lBQzlDLENBQUMsRUFBRSxPQUFPLEdBQUcsR0FBRyxFQUFFLEdBQUcsU0FBUztZQUM5QixDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsV0FBVyxHQUFHLFNBQVM7U0FDckMsQ0FBQyxDQUFDO0tBQ047SUFFRCxPQUFPO1FBQ0gsS0FBSztRQUNMLFNBQVMsRUFBRSxHQUFHO1FBQ2QsU0FBUyxFQUFFLEdBQUc7UUFDZCxjQUFjLEVBQUUsR0FBRztRQUNuQixZQUFZLEVBQUUsSUFBSTtLQUNyQixDQUFDO0FBQ04sQ0FBQztBQWxERCxrQ0FrREMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQSBiYWxsIHRvIGdlbmVyYXRlIGFyb3VuZC4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUJhbGwge1xuICAgIC8qKiBUaGUgeCBwb3NpdGlvbiBvZiB0aGUgQmFsbC4gKi9cbiAgICB4OiBudW1iZXI7XG4gICAgLyoqIFRoZSB5IHBvc2l0aW9uIG9mIHRoZSBCYWxsLiAqL1xuICAgIHk6IG51bWJlcjtcbiAgICAvKiogVGhlIHJhZGl1cyBvZiB0aGUgQmFsbC4gKi9cbiAgICByOiBudW1iZXI7XG59XG5cbi8qKiBBIGdlbmVyYXRlZCBiYWxsLiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQmFsbEdlbiB7XG4gICAgLyoqIExpc3Qgb2YgYmFsbHMgYmVpbmcgZ2VuZXJhdGVkLiAqL1xuICAgIGJhbGxzOiBJQmFsbFtdO1xuICAgIC8qKiBUaGUgZWxhc3RpY2l0eSBvZiB0aGUgYmFsbC4gKi9cbiAgICBnb29leW5lc3M6IG51bWJlcjtcbiAgICAvKiogV2F0ZXIgdGhyZXNob2xkIGZvciBnZW5lcmF0aW9uLiAqL1xuICAgIHRocmVzaG9sZDogbnVtYmVyO1xuICAgIC8qKiBHcmFzcyB0aHJlc2hvbGQuICovXG4gICAgZ3Jhc3NUaHJlc2hvbGQ6IG51bWJlcjtcbiAgICAvKiogU2VhIHRocmVzaG9sZC4gKi9cbiAgICBzZWFUaHJlc2hvbGQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYmFsbCBhcm91bmQgaXNsYW5kcy5cbiAqXG4gKiBAcGFyYW0gbWFwV2lkdGggLSBUaGUgd2lkdGggb2YgdGhlIG1hcC5cbiAqIEBwYXJhbSBtYXBIZWlnaHQgIC0gVGhlIGhlaWdodCBvZiB0aGUgbWFwLlxuICogQHBhcmFtIHJuZyAtIFRoZSBSTkcgZnVuY3Rpb25cbiAqIEByZXR1cm5zIEEgZ2VuZXJhdGVkIGJhbGwgZm9yIHRoZSBpc2xhbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc2xhbmRCYWxscyhtYXBXaWR0aDogbnVtYmVyLCBtYXBIZWlnaHQ6IG51bWJlciwgcm5nOiAoKSA9PiBudW1iZXIpOiBJQmFsbEdlbiB7XG4gICAgY29uc3QgYmFsbHM6IElCYWxsW10gPSBbXTtcbiAgICBjb25zdCBtaW5SYWRpdXMgPSAwLjU7XG4gICAgY29uc3QgbWF4UmFkaXVzID0gMS41O1xuICAgIGNvbnN0IG1heE9mZnNldCA9IG1hcFdpZHRoICogMC4yO1xuICAgIGNvbnN0IGFkZGl0aW9uYWxCYWxscyA9IDIwO1xuICAgIGNvbnN0IHJhZGl1c1JhbmdlID0gbWF4UmFkaXVzIC0gbWluUmFkaXVzO1xuXG4gICAgLy8gR2VuZXJhdGUgYmFsbHNcbiAgICBjb25zdCBpc2xhbmRYID0gbWFwV2lkdGggKiAwLjI1ICsgMC41O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkaXRpb25hbEJhbGxzOyBpKyspIHtcbiAgICAgICAgYmFsbHMucHVzaCh7XG4gICAgICAgICAgICB4OiBpc2xhbmRYICsgcm5nKCkgKiBtYXhPZmZzZXQgKiAyIC0gbWF4T2Zmc2V0LFxuICAgICAgICAgICAgeTogcm5nKCkgKiAobWFwSGVpZ2h0IC0gMSkgKyAwLjUsXG4gICAgICAgICAgICByOiBybmcoKSAqIHJhZGl1c1JhbmdlICsgbWluUmFkaXVzLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBiYWxscyxcbiAgICAgICAgZ29vZXluZXNzOiAxLjAsXG4gICAgICAgIHRocmVzaG9sZDogMy41LFxuICAgICAgICBncmFzc1RocmVzaG9sZDogNC4yNSxcbiAgICAgICAgc2VhVGhyZXNob2xkOiAyLjAsXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYmFsbCBhcm91bmQgcml2ZXJzLlxuICpcbiAqIEBwYXJhbSBtYXBXaWR0aCAtIFRoZSB3aWR0aCBvZiB0aGUgbWFwLlxuICogQHBhcmFtIG1hcEhlaWdodCAgLSBUaGUgaGVpZ2h0IG9mIHRoZSBtYXAuXG4gKiBAcGFyYW0gcm5nIC0gVGhlIFJORyBmdW5jdGlvblxuICogQHJldHVybnMgQSBnZW5lcmF0ZWQgYmFsbCBmb3IgdGhlIHJpdmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcml2ZXJCYWxscyhtYXBXaWR0aDogbnVtYmVyLCBtYXBIZWlnaHQ6IG51bWJlciwgcm5nOiAoKSA9PiBudW1iZXIpOiBJQmFsbEdlbiB7XG4gICAgY29uc3QgYmFsbHM6IElCYWxsW10gPSBbXTtcbiAgICBjb25zdCBtaW5SYWRpdXMgPSAwLjU7XG4gICAgY29uc3QgbWF4UmFkaXVzID0gNC4wO1xuICAgIGNvbnN0IG1heE9mZnNldCA9IG1hcEhlaWdodCAvIDI7XG4gICAgY29uc3QgYWRkaXRpb25hbEJhbGxzID0gODtcbiAgICBjb25zdCByYWRpdXNSYW5nZSA9IG1heFJhZGl1cyAtIG1pblJhZGl1cztcblxuICAgIC8vIEluaXRpYWwgYmFsbFxuICAgIGNvbnN0IGlzbGFuZFggPSAwLjU7XG4gICAgY29uc3QgaXNsYW5kWSA9IChybmcoKSA8IDAuNSkgPyAwLjUgOiAobWFwSGVpZ2h0IC0gMC41KTtcbiAgICBiYWxscy5wdXNoKHtcbiAgICAgICAgeDogaXNsYW5kWCxcbiAgICAgICAgeTogaXNsYW5kWSxcbiAgICAgICAgcjogcm5nKCkgKiByYWRpdXNSYW5nZSArIG1pblJhZGl1cyxcbiAgICB9KTtcblxuICAgIC8vIEV4dHJhIGJhbGxzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRpdGlvbmFsQmFsbHM7IGkrKykge1xuICAgICAgICBiYWxscy5wdXNoKHtcbiAgICAgICAgICAgIHg6IGlzbGFuZFgsXG4gICAgICAgICAgICB5OiBpc2xhbmRZICsgcm5nKCkgKiBtYXhPZmZzZXQgKiAyIC0gbWF4T2Zmc2V0LFxuICAgICAgICAgICAgcjogcm5nKCkgKiByYWRpdXNSYW5nZSArIG1pblJhZGl1cyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmFsbHMsXG4gICAgICAgIGdvb2V5bmVzczogMC45NSxcbiAgICAgICAgdGhyZXNob2xkOiAyLjAsXG4gICAgICAgIGdyYXNzVGhyZXNob2xkOiAyLjQsXG4gICAgICAgIHNlYVRocmVzaG9sZDogMS41LFxuICAgIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGJhbGwgYXJvdW5kIGNvcm5lcnMgb2YgdGhlIG1hcC5cbiAqXG4gKiBAcGFyYW0gbWFwV2lkdGggLSBUaGUgd2lkdGggb2YgdGhlIG1hcC5cbiAqIEBwYXJhbSBtYXBIZWlnaHQgIC0gVGhlIGhlaWdodCBvZiB0aGUgbWFwLlxuICogQHBhcmFtIHJuZyAtIFRoZSBSTkcgZnVuY3Rpb25cbiAqIEByZXR1cm5zIEEgZ2VuZXJhdGVkIGJhbGwgZm9yIHRoZSBjb3JuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3JuZXJCYWxscyhtYXBXaWR0aDogbnVtYmVyLCBtYXBIZWlnaHQ6IG51bWJlciwgcm5nOiAoKSA9PiBudW1iZXIpOiBJQmFsbEdlbiB7XG4gICAgY29uc3QgYmFsbHM6IElCYWxsW10gPSBbXTtcbiAgICBjb25zdCBtaW5SYWRpdXMgPSAwLjc1O1xuICAgIGNvbnN0IG1heFJhZGl1cyA9IDEuMjU7XG4gICAgY29uc3QgbWF4T2Zmc2V0ID0gMTAuMDtcbiAgICBjb25zdCBhZGRpdGlvbmFsQmFsbHMgPSAyMDtcbiAgICBjb25zdCByYWRpdXNSYW5nZSA9IG1heFJhZGl1cyAtIG1pblJhZGl1cztcblxuICAgIC8vIEluaXRpYWwgYmFsbCAodG9wIGlzbGFuZClcbiAgICBjb25zdCBpc2xhbmRYID0gMC41O1xuICAgIGxldCBpc2xhbmRZID0gMC41O1xuICAgIGJhbGxzLnB1c2goe1xuICAgICAgICB4OiBpc2xhbmRYLFxuICAgICAgICB5OiBpc2xhbmRZLFxuICAgICAgICByOiBybmcoKSAqIHJhZGl1c1JhbmdlICsgbWluUmFkaXVzLFxuICAgIH0pO1xuXG4gICAgLy8gRXh0cmEgYmFsbHMgKHRvcCBpc2xhbmQpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRpdGlvbmFsQmFsbHM7IGkrKykge1xuICAgICAgICBiYWxscy5wdXNoKHtcbiAgICAgICAgICAgIHg6IGlzbGFuZFggKyBybmcoKSAqIG1heE9mZnNldCAqIDIgLSBtYXhPZmZzZXQsXG4gICAgICAgICAgICB5OiBpc2xhbmRZICsgcm5nKCkgKiBtYXhPZmZzZXQgKiAyIC0gbWF4T2Zmc2V0LFxuICAgICAgICAgICAgcjogcm5nKCkgKiByYWRpdXNSYW5nZSArIG1pblJhZGl1cyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbCBiYWxsIChib3R0b20gaXNsYW5kKVxuICAgIGlzbGFuZFkgPSBtYXBIZWlnaHQgLSAwLjU7XG4gICAgYmFsbHMucHVzaCh7XG4gICAgICAgIHg6IGlzbGFuZFgsXG4gICAgICAgIHk6IGlzbGFuZFksXG4gICAgICAgIHI6IHJuZygpICogcmFkaXVzUmFuZ2UgKyBtaW5SYWRpdXMsXG4gICAgfSk7XG5cbiAgICAvLyBFeHRyYSBiYWxscyAoYm90dG9tIGlzbGFuZClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZGl0aW9uYWxCYWxsczsgaSsrKSB7XG4gICAgICAgIGJhbGxzLnB1c2goe1xuICAgICAgICAgICAgeDogaXNsYW5kWCArIHJuZygpICogbWF4T2Zmc2V0ICogMiAtIG1heE9mZnNldCxcbiAgICAgICAgICAgIHk6IGlzbGFuZFkgLSBybmcoKSAqIG1heE9mZnNldCxcbiAgICAgICAgICAgIHI6IHJuZygpICogcmFkaXVzUmFuZ2UgKyBtaW5SYWRpdXMsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGJhbGxzLFxuICAgICAgICBnb29leW5lc3M6IDEuMCxcbiAgICAgICAgdGhyZXNob2xkOiA0LjAsXG4gICAgICAgIGdyYXNzVGhyZXNob2xkOiA1LjAsXG4gICAgICAgIHNlYVRocmVzaG9sZDogMi43NSxcbiAgICB9O1xufVxuIl19